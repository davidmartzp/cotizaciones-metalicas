<div class="container mt-4">
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">Cotizaciones</h5>
      <p class="card-text">
        Agrega y administra cotizaciones.
      </p>
      <button type="button" (click)="addBudget()" class="btn btn-primary add-btn">
        <i class="fas fa-plus"></i> Generar cotizaci贸n
      </button>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-body">
      <!-- Filtro de texto -->
      <div class="mb-3">
        <input 
          type="text" 
          class="form-control" 
          placeholder="Buscar cotizaci贸n..."
          [(ngModel)]="filterText"
        />
      </div>

      <table class="table table-dark table-striped">
        <thead>
          <tr>
            <th>C贸digo</th>
            <th>Proyecto</th>
            <th>Cliente</th>
            <th>Fecha</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let budget of filteredBudgets | paginate: { itemsPerPage: itemsPerPage, currentPage: page }">
            <td>{{ budget.code }}</td>
            <td>{{ budget.project_name }}</td>
            <td>{{ budget.client_name }}</td>
            <td>{{ budget.project_date }}</td>

            <td class="actions">
              <button 
                (click)="viewBudget(budget.code)" 
                class="btn btn-info btn-sm" 
                data-bs-toggle="tooltip" 
                data-bs-placement="top" 
                title="Ver detalles">
                <i class="fas fa-download"></i>
              </button>
              <button 
                (click)="editBudget(budget.id)" 
                class="btn btn-warning btn-sm" 
                data-bs-toggle="tooltip" 
                data-bs-placement="top" 
                title="Editar">
                <i class="fas fa-edit"></i>
              </button>
             <!--<button 
                (click)="deleteBudget(budget.id)" 
                class="btn btn-danger btn-sm" 
                data-bs-toggle="tooltip" 
                data-bs-placement="top" 
                title="Eliminar">
                <i class="fas fa-trash"></i>
              </button>-->
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Paginaci贸n -->
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="page === 1">
            <a class="page-link" (click)="page = page - 1" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item" *ngFor="let pageNum of [].constructor(totalPages); let i = index" [class.active]="page === i + 1">
            <a class="page-link" (click)="page = i + 1">{{ i + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="page === totalPages">
            <a class="page-link" (click)="page = page + 1" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
